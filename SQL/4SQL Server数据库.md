>## SQL Server 服务
1. 数据库引擎(Database Engine)：数据库引擎是SQL Server 用于存储、处理和保护数据的核心服务。例如，创建数据库（表、视图）、数据查询等操作。数据库引擎还提供了受控访问和快速事务处理功能，并提供了大量支持以保持可用性。Service Broker（服务代理）、Replication（复制技术）和Full Text Search（全文搜索）都是数据库引擎的一部分。
2. 分析服务(Analysis Services)：为商业智能应用程序提供联机分析处理（OLAP）和数据挖掘功能。
3. 集成服务(Integration Services)：集成服务是用于生成企业级数据集成和数据转换解决方案的平台，负责完成数据的提取、转换和加载等操作，可以高效地处理各种各样地数据源的数据，包括SQL Server、Oracle、Excel、XML文档、文本文件等。
4. 报表服务(Reporting Services)：是基于服务器的报表平台，可用来创建和管理包含关系数据源和多维数据源中的数据的表格、矩阵、图形和自由格式的报表。  

<br/>

>## SQL Server 2012数据库的存储结构
&emsp;&emsp;从物理实现上讲，一个SQL Server数据库由数据文件和日志文件组成；SQL Server的文件由盘区组成，盘区由页面组成。
- 数据文件：存储用户数据和数据对象的文件称为数据文件(Data File)，一个数据库可以有一个或多个数据文件。分为主数据文件(.mdf)和辅助数据文件(.ndf)。
- 日志文件：用于保存恢复数据库所需的日志信息（记录用户对数据库进行的输入、删除和修改等操作情况）的文件称为日志文件(.ldf)。
- 文件组：即文件的集合。
  - 主文件组：包含主要数据文件和任何没有明确指派给其他文件组的其他文件。管理数据库的系统表所有页均分配在主文件组中。
  - 用户定义文件组：在`create database`或`alter database`语句中使用`filegroup`关键字指定的文件组。
- 页面：数据是按行存储在数据页中的，行不能跨页存储。一个数据页的最大容量是8192B，每页的开始部分是96B的页头信息，用于存储页的类型、该页的可用空间数量、占用该页的数据库对象的对象标识等系统信息；其余的8096B用于存放该页数据库对象的数据信息。
- 盘区：每个盘区是由8个连续页组成的数据结构，大小为64KB。SQL Server自动以盘区为单位给数据库对象分配存储空间。

<br/>

>## SQL Server 2012数据库
&emsp;&emsp;数据库是SQL Server存储和管理数据的对象。SQL Server 2012有两类数据库：系统数据库和用户数据库。系统数据库存储有关SQL Server的系统信息，即存储SQL Server专用的、用于管理自身和用户数据库的数据。用户数据库是用户创建的数据库，用于存储用户的数据。
- 系统数据库：在安装SQL Server时，系统会自动创建4个系统数据库，包括**master、msdb、model和tempdb**。
    1. master数据库：master数据库是SQL Server中最重要的数据库。它存储的信息包括所有可用的数据库及为每一个数据库分配的空间、使用中的进程、用户账户、活动的锁、系统错误等信息和系统存储过程。
    2. msdb数据库：msdb数据库由SQL Server Agent服务使用，用来管理警报和任务。它还存储SQL Server管理数据库的每一次备份和恢复的历史信息。
    3. model数据库：model数据库的主要作用是为新的数据库充当模板，用户新建的数据库是model的副本。
    4. tempdb数据库：tempdb数据库是被所有SQL Server数据库和数据库用户共享的数据库，它用来存储临时信息。
- 用户数据库：SQL Server数据库主要有以下对象：
  - 表：存放各种数据的载体。
  - 约束：强制实现数据完整性的方法。
  - 默认值：在表中插入数据时，若用户没有给出明确的列值，系统会自动对其赋予预设好的数据值。
  - 规则：规则是对数据库表中数据信息进行限制的一套准则。
  - 索引：实现数据快速检索并强制数据完整性的一种存储结构。
  - 视图：查看数据库中一个或多个表或视图中数据的一种方法。
  - 存储过程：一组预先编译好的能实现特定数据操作功能的SQL语句集。
  - 触发器：一种特殊的存储过程，在用户向表中插入、更新或删除数据时自动执行。

<br/>

>## SQL Server的索引结构
**索引的作用**
- 快速存储数据
- 保证数据记录的唯一性
- 实现表与表之间的参照完整性
- 在使用order by、group by子句进行数据检索时，利用索引可以减少排序和分组时间  
<br/>

**SQL Server的索引**
1. **聚集索引(Clustered Index)**：聚集索引根据数据行键值的排列顺序，在表内排序并存储对应的数据记录，使得数据表物理顺序与索引顺序一致。SQL Server是按B$-$树方式组织聚集索引的，B$-$树的叶结点存放数据页信息。
2. **非聚集索引(Nonclustered Index)**：非聚集索引完全独立于数据行的结构。SQL Server也是按B$-$树方式组织非聚集索引，与聚集索引的不同之处在于：非聚集索引B$-$树的叶节点不存放数据页信息，而是存放非聚集索引的键值，且每个键值项都有指针指向包含该键值的数据行。

&emsp;&emsp;在SQL Server中，由于一个表中的记录只能以一种物理顺序存放，因此每个表只能有一个聚集索引。但一个表可以有不止一个非聚集索引，最多可以建立249个非聚集索引。
