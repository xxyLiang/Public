推荐教材
- 埃尔玛斯瑞. 数据库系统基础[M]. 北京：清华大学出版社，2011
- 埃尔玛斯瑞. 数据库系统基础，高级篇[M]. 北京：清华大学出版社，2008
- Ramez Elmasri, Shamkant B. Navathe. FUNDAMENTALS OF Database Systems (7th). Pearson

<br/>
&emsp;&emsp;事务的概念为描述数据库处理的逻辑单元提供了一种机制
&emsp;&emsp;事务处理系统（Transaction Processing system）是拥有大型数据库以及允许数百个用户同时执行数据库事务的系统。（E.g. 机票预订、银行业务、信用卡处理、股票市场、超市收款）
<br/>

>## 事务处理简介

1. **单用户系统与多用户系统**
   单用户：在同一时刻只有一个用户能够使用DBMS
   多用户：多个用户可以同时使用系统，并对数据库进行访问

2. **事务、读写操作和DBMS缓冲区**
   - 事务（Transaction）是一个构成数据库处理逻辑单元的可执行程序。一个事务包括对一个或多个数据库访问操作，这些操作包括插入、删除、修改或检索操作。
     - 事务所设计的数据库操作既可以嵌入到应用程序中，也可以通过注入SQL的高级查询语言交互地指定。
     - 数据库基本上可以看作是**命名数据项**的一个集合。
     - 数据项的大小称为它的**粒度**（可以是数据库中某个记录的一个字段、一条记录、整个磁盘块）。
   - 读写操作
     - read_item(X) : 将名为X的数据项读入程序变量中
     - write_item(X) : 将程序变量X的值写入名为X的数据项中
     - 数据的存放位置：磁盘——缓存——程序变量。修改后的数据何时从缓存写入到磁盘由DBMS控制，可以立即执行或定时执行。

3. **并行处理的问题**
   - 事务丢失问题：T1修改的X值还没来得及写入回缓存，T2就读取了缓存中的X值
   - 暂时事务（脏读）问题：T1修改的X值已写入缓存，在T2读取了缓存中的X值后，T1的事务又因故障等原因需要撤销。
   - 错误求和问题
   - 不可重复读

4. **恢复的必要性**
   故障的类型：事务故障、系统故障、介质故障

<br/>

>## 事务操作

1. 操作
   - ```COMMIT```
   - ```ROLLBACK```
   - 。。。

2. 系统日志
   为了能够从影响事务的故障中恢复，系统维护一个日志来记录所有影响数据库项的值的事务操作。
   日志保存在磁盘上。日志会被定期备份到归档存储设备（磁盘）中。 

<br/>

>## 事务的描述特性

事务应当有一些特性，通常被称为ACID特性。

1. **原子性（atomicity)**
    &emsp;&emsp;一个事务要么全部提交成功，要么全部失败回滚，不能只执行其中的一部分操作，这就是事务的原子性

2. **一致性（consistency)**
    &emsp;&emsp;事务的执行不能破坏数据库数据的完整性和一致性，一个事务在执行之前和执行之后，数据库都必须处于一致性状态。
    &emsp;&emsp;如果数据库系统在运行过程中发生故障，有些事务尚未完成就被迫中断，这些未完成的事务对数据库所作的修改有一部分已写入物理数据库，这是数据库就处于一种不正确的状态，也就是不一致的状态

3. **隔离性（isolation）**
    &emsp;&emsp;事务的隔离性是指在并发环境中，并发的事务时相互隔离的，一个事务的执行不能不被其他事务干扰。不同的事务并发操作相同的数据时，每个事务都有各自完成的数据空间，即一个事务内部的操作及使用的数据对其他并发事务时隔离的，并发执行的各个事务之间不能相互干扰。

4. **持久性（durability）**
    &emsp;&emsp;一旦事务提交，那么它对数据库中的对应数据的状态的变更就会永久保存到数据库中。--即使发生系统崩溃或机器宕机等故障，只要数据库能够重新启动，那么一定能够将其恢复到事务成功结束的状态。

<br/>

>## 冲突
两指令存在某（共同的）处理对象Q，则
- $l_i = read(Q) , l_j = read(Q)$ ：无冲突，次序不重要
- $l_i = read(Q) , l_j = write(Q)$ ：冲突，次序重要
- $l_i = write(Q) , l_j = read(Q)$ ：冲突，次序重要
- $l_i = write(Q) , l_j = write(Q)$ ：冲突，次序重要

冲突：l1和l2是不同事务在相同的数据项上的操作，并且其中至少有一个write指令时，就说l1和l2是冲突的。
（所谓冲突，指的是调度中的一对动作，满足：如果它们的顺序交换，则涉及到的事务中至少有一个的行为会改变。）

#### 测试调度的冲突可串行化 & 视图可串行化
http://blog.kongfy.com/2019/03/serializable/
https://blog.csdn.net/ivyhill/article/details/50531240
- 构造优先图或串行化图，这是一个有向图。
- 冲突可串行化调度是可串行化调度的**充分条件**，不是必要条件。
- 视图等价

<br/>

>## SQL中的事务支持

SQL中没有显式的Begin_Transaction语句。当处理一个特定的SQL语句时，将